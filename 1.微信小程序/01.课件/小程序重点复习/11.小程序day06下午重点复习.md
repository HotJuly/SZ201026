# 小程序day06下午重点复习

1. 背景音频**事件监听**
   1. backgroundAudioManager.onPlay(function(){})
   2. backgroundAudioManager.onPause(function(){})
   3. backgroundAudioManager.onTimeUpdate(function(){})
   4. backgroundAudioManager.onEnded(function(){})(该函数只有音频自动播放结束才会触发)
   5. backgroundAudioManager.onStop(function(){})(该函数只有在音频被强制终止才会触发)
   6. 注意:绑定的是事件监听回调,不是绑定事件本身
2. 小程序wxs文件
   1. 优点:他与view层交互更快(相对于model层)
   2. 特点:
      1. 只能使用ES5语法(let,const不能使用,箭头函数,对象简写,解构...)
      2. 使用的是commonJs模块化语法
3. **小程序分包功能**
   1. 前情提要:小程序包的体积不能超过**2M**
   2. 分包的结果:
      1. 主包(项目打开一上来就需要使用到的页面)
      2. 次包(相当于实现了组件懒加载,刚开始不需要使用到的都可以放在次包中)
      3. 注意:组件懒加载的特点:
         1. 优点:减小项目首次打开请求的js大小,提高首屏渲染速度
         2. 缺点:增加了其他页面的渲染时间(由于首次js中不存在其他页面的代码,所以每次都需要发送http请求获取对应页面的代码)
   3. 分包类型
      1. 普通分包
         1. 分包不分家->主包和次包的资源共享
      2. 独立分包
         1. 分包也分家->独立分包相当于是一个完整的项目,不允许依赖于主包中的资源
      3. 配置
         1. app.json->subpackages进行配置
      4. 注意:
         1. 经过分包之后,主包和次包的体积都不能大于**2M**
         2. 整个项目所有的包加起来的体积不能大于**20MB**
   4. 分包预下载
      1. 该功能可以解决组件懒加载的负面效果
      2. 该功能当用户进入某个指定页面之后,会趁用户不注意,自动下载即将可能需要用到的页面代码(需要提前配置)
      3. 配置
         1. app.json->preloadRule进行配置